{% from 'macros/macros.html' import data_breadcrumb %}
{% extends "layouts/base.html" %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}

    <link rel="stylesheet" href="{{ config.ASSETS_ROOT }}/css/bootstrap.css">
    <link rel="stylesheet" href="{{ config.ASSETS_ROOT }}/vendors/linericon/style.css">
    <link rel="stylesheet" href="{{ config.ASSETS_ROOT }}/css/font-awesome.min.css">
    <link rel="stylesheet" href="{{ config.ASSETS_ROOT }}/vendors/bootstrap-datepicker/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" href="{{ config.ASSETS_ROOT }}/vendors/nice-select/css/nice-select.css">
    <link rel="stylesheet" href="{{ config.ASSETS_ROOT }}/vendors/owl-carousel/owl.carousel.min.css">
    <!-- main css -->
    <link rel="stylesheet" href="{{ config.ASSETS_ROOT }}/css/style.css">
    <link rel="stylesheet" href="{{ config.ASSETS_ROOT }}/css/responsive.css">


{% endblock stylesheets %}

{% block content %}

    {% include 'includes/header.html' %}

    <!--================magazine Categorie Area =================-->
    {{ data_breadcrumb(templateName) }}
    <!--================magazine Categorie Area =================-->
    
    <!--================magazine Area =================-->
    <section class="blog_area">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="blog_left_sidebar">
                        <div class="comment-form" style="border: 3px solid #ccc;">
                            <h4>매거진 글 작성</h4>
                            <form role="form" method="post" class="post-form" enctype="multipart/form-data">
                                <div class="form-group form-inline">
                                  <div class="form-group col-lg-8 col-md-8">
                                    <input type="text" name="title" value="" id="magazine-title" style="border: 3px solid #ccc;" placeholder="제목을 입력하세요">
                                  </div>
                                  <br><br/>
                                  <div class="form-group col-lg-8 col-md-8">
                                    {% for thema in ["여행", "미식", "숙소"] %}
                                    <label><input type="radio" name="themaName" value="{{ thema }}" style="border: 3px solid #ccc;"> {{ thema }} &nbsp;&nbsp;</label>
                                    {% endfor %}
                                  </div>										
                                </div>
                                <div class="form-group" contenteditable="true" value="" name="content" id="magazine-content" style="border: 3px solid #ccc; min-height: 30em">
                                </div>
                                <div class="form-group">
                                    <input type="file" accept="image/*" name="file" value="" style="border: 3px solid #ccc;" id="magazine-file" >
                                </div>
                                <div class="form-group">
                                    <input type="text" name="tag" value="" style="border: 3px solid #ccc;" id="magazine-tag" placeholder="해시태그를 입력하세요">
                                </div>                                  
                                <button type="submit" name="magazine" class="btn btn-outline-warning waves-effect" id="magazine-button"> 등록하기</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--================magazine Area =================-->
    
    {% include 'includes/footer.html' %}


{% endblock content %}

{% block javascripts %}

    <script src="{{ config.ASSETS_ROOT }}/js/jquery-3.2.1.min.js"></script>
    <script src="{{ config.ASSETS_ROOT }}/js/popper.js"></script>
    <script src="{{ config.ASSETS_ROOT }}/js/bootstrap.min.js"></script>
    <script src="{{ config.ASSETS_ROOT }}/vendors/owl-carousel/owl.carousel.min.js"></script>
    <script src="{{ config.ASSETS_ROOT }}/js/jquery.ajaxchimp.min.js"></script>
    <script src="{{ config.ASSETS_ROOT }}/js/mail-script.js"></script>
    <script src="{{ config.ASSETS_ROOT }}/vendors/bootstrap-datepicker/bootstrap-datetimepicker.min.js"></script>
    <script src="{{ config.ASSETS_ROOT }}/vendors/nice-select/js/jquery.nice-select.js"></script>
    <script src="{{ config.ASSETS_ROOT }}/js/mail-script.js"></script>
    <script src="{{ config.ASSETS_ROOT }}/js/stellar.js"></script>
    <script src="{{ config.ASSETS_ROOT }}/vendors/lightbox/simpleLightbox.min.js"></script>
    <script src="{{ config.ASSETS_ROOT }}/js/custom.js"></script>

    <script>

        $(document).ready(function(){  
            $('#magazine-button').click(function(){  
                var magazineTitle = $('#magazine-title').val();  
                var magazineThema = $("input[name='themaName']:checked").val(); 
                var magazineContent = $("#magazine-content").html();
                var magazineImage = $('#magazine-file').val();
                var magazineTag = $('#magazine-tag').val();

                if(magazineTitle != '' && magazineContent != ''){ 
                    var dataJson = {
                        "magazineTitle": magazineTitle,
                        "magazineThema": magazineThema,
                        "magazineContent": magazineContent,
                        "magazineImage": magazineImage,
                        "magazineTag": magazineTag
                    } 
                    $.ajax({
                        type: 'POST',
                        url: 'Write{{userId}}',
                        async: false,
                        dataType: 'json',
                        contentType: 'application/json',
                        data: JSON.stringify(dataJson),
                        success: function(response) {
                            console.log('register success')
                        }
                    })
                }
                else {  
                    alert("Both Fields are required");  
                }  
            }); 
        });  
        
    </script>


{% endblock javascripts %}

<!-- Specific Page JS goes HERE  -->

